#!/usr/bin/env bash
set -e

echo "ğŸ” Pre-commit safety check..."

# Block obvious secrets
if git diff --cached --name-only | grep -E '(ANON_KEY|\.env|secret|token|key=)' >/dev/null; then
  echo "âŒ Blocked: looks like a secret/junk file is staged."
  exit 1
fi

# Block common junk
if git diff --cached --name-only | grep -E '(\.DS_Store|dist/|node_modules/|\.vite/)' >/dev/null; then
  echo "âŒ Blocked: build or OS junk staged."
  exit 1
fi

echo "âœ… Pre-commit checks passed."
exit 0
