#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Check if any JSON files in public/data have changed
if git diff --cached --name-only | grep -q "^public/data/.*\.json$"; then
  echo "ğŸ” Detected changes in room JSON files..."
  echo "ğŸ“¦ Regenerating room registry..."
  
  node scripts/generate-room-registry.js
  
  # Add the generated files to the commit
  git add src/lib/roomManifest.ts src/lib/roomDataImports.ts
  
  echo "âœ… Room registry updated and added to commit"
fi
