#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check if any room JSON files were modified
ROOM_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep "^public/data/.*\.json$" || true)

if [ ! -z "$ROOM_FILES" ]; then
  echo "ğŸ” Room JSON files modified, regenerating registry..."
  
  # Run registry generation
  node scripts/generate-room-registry.js
  
  # Add generated files to commit
  git add src/lib/roomManifest.ts src/lib/roomDataImports.ts
  
  echo "âœ… Room registry updated and staged"
fi
